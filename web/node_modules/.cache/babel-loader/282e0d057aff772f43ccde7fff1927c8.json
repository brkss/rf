{"ast":null,"code":"var _jsxFileName = \"/Users/abdel/Documents/web/newera/rate-food/web/src/pages/Auth/Login.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { Box, Center } from \"@chakra-ui/react\";\nimport { LoginButton } from \"../../components\";\nimport { getAccessToken } from \"../../utils/token/token\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport { useAuthMutation } from \"../../generated/graphql\";\nimport queryString from \"querystring\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Login = props => {\n  _s();\n\n  const history = useHistory();\n  const [auth] = useAuthMutation();\n\n  const parseParams = () => {\n    const params = queryString.parse(props.location.search); //if (!params.code) history.push(\"/login\");\n\n    if (params.code) {\n      auth({\n        variables: {\n          code: params.code\n        },\n        onCompleted: res => {\n          if (res.auth.status) {\n            history.push(\"/feedback\");\n          } else {\n            console.log(\"something went wrong ! \");\n          }\n        }\n      });\n    }\n\n    console.log(\"code => \", params.code);\n  };\n\n  React.useEffect(() => {\n    parseParams();\n  }, []);\n\n  const authorize = () => {\n    window.open(\"https://api.intra.42.fr/oauth/authorize?client_id=9fa33f88a4ea0fcf0bf5f7901e5cce3e3bf6c6e55178920d2d379d2d0440121d&redirect_uri=http%3A%2F%2Flocalhost%3A3000&response_type=code\");\n  };\n\n  if (getAccessToken()) return /*#__PURE__*/_jsxDEV(Redirect, {\n    to: \"/feedback\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 32\n  }, this);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    h: \"100vh\",\n    children: /*#__PURE__*/_jsxDEV(Center, {\n      h: \"100%\",\n      children: /*#__PURE__*/_jsxDEV(LoginButton, {\n        label: \"Login With Intra\",\n        clicked: () => authorize()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Login, \"DuP/Otvl0D1bi1KoUDE9be6L13w=\", false, function () {\n  return [useHistory, useAuthMutation];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/abdel/Documents/web/newera/rate-food/web/src/pages/Auth/Login.tsx"],"names":["React","Box","Center","LoginButton","getAccessToken","Redirect","useHistory","useAuthMutation","queryString","Login","props","history","auth","parseParams","params","parse","location","search","code","variables","onCompleted","res","status","push","console","log","useEffect","authorize","window","open"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,EAAcC,MAAd,QAA4B,kBAA5B;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,cAAT,QAA+B,yBAA/B;AACA,SAASC,QAAT,EAAmBC,UAAnB,QAAqC,kBAArC;AACA,SAASC,eAAT,QAAgC,yBAAhC;AACA,OAAOC,WAAP,MAAwB,aAAxB;;AAEA,OAAO,MAAMC,KAAoB,GAAIC,KAAD,IAAW;AAAA;;AAC7C,QAAMC,OAAO,GAAGL,UAAU,EAA1B;AACA,QAAM,CAACM,IAAD,IAASL,eAAe,EAA9B;;AAEA,QAAMM,WAAW,GAAG,MAAM;AACxB,UAAMC,MAAM,GAAGN,WAAW,CAACO,KAAZ,CAAkBL,KAAK,CAACM,QAAN,CAAeC,MAAjC,CAAf,CADwB,CAExB;;AACA,QAAIH,MAAM,CAACI,IAAX,EAAiB;AACfN,MAAAA,IAAI,CAAC;AACHO,QAAAA,SAAS,EAAE;AACTD,UAAAA,IAAI,EAAEJ,MAAM,CAACI;AADJ,SADR;AAIHE,QAAAA,WAAW,EAAGC,GAAD,IAAS;AACpB,cAAIA,GAAG,CAACT,IAAJ,CAASU,MAAb,EAAqB;AACnBX,YAAAA,OAAO,CAACY,IAAR,CAAa,WAAb;AACD,WAFD,MAEO;AACLC,YAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD;AACF;AAVE,OAAD,CAAJ;AAYD;;AACDD,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBX,MAAM,CAACI,IAA/B;AACD,GAlBD;;AAoBAlB,EAAAA,KAAK,CAAC0B,SAAN,CAAgB,MAAM;AACpBb,IAAAA,WAAW;AACZ,GAFD,EAEG,EAFH;;AAIA,QAAMc,SAAS,GAAG,MAAM;AACtBC,IAAAA,MAAM,CAACC,IAAP,CACE,kLADF;AAGD,GAJD;;AAKA,MAAIzB,cAAc,EAAlB,EAAsB,oBAAO,QAAC,QAAD;AAAU,IAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,UAAP;AAEtB,sBACE,QAAC,GAAD;AAAK,IAAA,CAAC,EAAE,OAAR;AAAA,2BACE,QAAC,MAAD;AAAQ,MAAA,CAAC,EAAE,MAAX;AAAA,6BACE,QAAC,WAAD;AAAa,QAAA,KAAK,EAAE,kBAApB;AAAwC,QAAA,OAAO,EAAE,MAAMuB,SAAS;AAAhE;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,UADF;AAOD,CA1CM;;GAAMlB,K;UACKH,U,EACDC,e;;;KAFJE,K","sourcesContent":["import React from \"react\";\nimport { Box, Center } from \"@chakra-ui/react\";\nimport { LoginButton } from \"../../components\";\nimport { getAccessToken } from \"../../utils/token/token\";\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport { useAuthMutation } from \"../../generated/graphql\";\nimport queryString from \"querystring\";\n\nexport const Login: React.FC<any> = (props) => {\n  const history = useHistory();\n  const [auth] = useAuthMutation();\n\n  const parseParams = () => {\n    const params = queryString.parse(props.location.search);\n    //if (!params.code) history.push(\"/login\");\n    if (params.code) {\n      auth({\n        variables: {\n          code: params.code as string,\n        },\n        onCompleted: (res) => {\n          if (res.auth.status) {\n            history.push(\"/feedback\");\n          } else {\n            console.log(\"something went wrong ! \");\n          }\n        },\n      });\n    }\n    console.log(\"code => \", params.code);\n  };\n\n  React.useEffect(() => {\n    parseParams();\n  }, []);\n\n  const authorize = () => {\n    window.open(\n      \"https://api.intra.42.fr/oauth/authorize?client_id=9fa33f88a4ea0fcf0bf5f7901e5cce3e3bf6c6e55178920d2d379d2d0440121d&redirect_uri=http%3A%2F%2Flocalhost%3A3000&response_type=code\"\n    );\n  };\n  if (getAccessToken()) return <Redirect to=\"/feedback\" />;\n\n  return (\n    <Box h={\"100vh\"}>\n      <Center h={\"100%\"}>\n        <LoginButton label={\"Login With Intra\"} clicked={() => authorize()} />\n      </Center>\n    </Box>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}